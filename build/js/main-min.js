(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=3)})([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",function(){return popupFunc});class popupFunc{constructor(button,popup,wrapper=true){this.button=button;this.popup=popup;this.wrapper=wrapper;this.openPopupFunc=this.openPopup.bind(this);this.closePopupFunc=this.closePopup.bind(this);if(Array.isArray(this.button)){this.button.forEach(elem=>{elem.addEventListener("click",this.openPopupFunc)})}else{this.button.addEventListener("click",this.openPopupFunc)}if(Array.isArray(this.popup)){this.popup.forEach(elem=>{elem.querySelectorAll(".close").forEach(elem=>elem.addEventListener("click",this.closePopupFunc))})}else{this.popup.querySelectorAll(".close").forEach(elem=>elem.addEventListener("click",this.closePopupFunc))}}openPopup(event){if(event.target.dataset.stopEvent===undefined){event.preventDefault();if(Array.isArray(this.popup)){this.popup.forEach(elem=>{elem.classList.add("active");if(elem.parentNode.classList.contains("wrapper")&&this.wrapper){elem.parentNode.classList.add("active")}if(window.screen.width<768){document.body.classList.add("hidden")}});if(document.querySelector(".popup-wrapper")&&this.wrapper){document.querySelector(".popup-wrapper").classList.add("active")}}else{this.popup.classList.add("active");if(this.popup.parentNode.classList.contains("wrapper")&&this.wrapper){this.popup.parentNode.classList.add("active")}if(window.screen.width<768){document.body.classList.add("hidden")}if(document.querySelector(".popup-wrapper")&&this.wrapper){document.querySelector(".popup-wrapper").classList.add("active")}}window.addEventListener("mousedown",this.closePopupFunc)}}closePopup(event){if(!event.target.classList.contains("close")){event.stopPropagation()}else{if(Array.isArray(this.popup)){this.popup.forEach(elem=>{elem.classList.remove("active");if(elem.parentNode.classList.contains("wrapper")&&this.wrapper){elem.parentNode.classList.remove("active")}if(window.screen.width<768){document.body.classList.remove("hidden")}if(document.querySelector(".popup-wrapper")&&this.wrapper){document.querySelector(".popup-wrapper").classList.remove("active")}})}else{this.popup.classList.remove("active");if(this.popup.parentNode.classList.contains("wrapper")&&this.wrapper){this.popup.parentNode.classList.remove("active")}if(window.screen.width<768){document.body.classList.remove("hidden")}if(document.querySelector(".popup-wrapper")&&this.wrapper){document.querySelector(".popup-wrapper").classList.remove("active")}}window.removeEventListener("mousedown",this.closePopupFunc)}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",function(){return hideList});class hideList{constructor(listBlock,fixHeight=null){this.fixHeight=fixHeight;this.listBlock=listBlock;this.list=this.listBlock.querySelector("[data-block]");this.listBlock.querySelector("[data-btn]").addEventListener("click",e=>{this.showBlock(e)});if(this.listBlock.querySelector("[data-btn]").classList.contains("active")){this.fixHeight===null?this.list.style.height=`${this.list.scrollHeight}px`:this.list.style.height=`${this.fixHeight}px`;this.list.classList.add("active")}if(this.list.querySelector(".close")){this.list.querySelector(".close").addEventListener("click",e=>{this.showBlock(e)})}}showBlock(e){e.preventDefault();let blockHeight=parseInt(window.getComputedStyle(this.list).getPropertyValue("height"));if(blockHeight===0){this.fixHeight===null?this.list.style.height=`${this.list.scrollHeight}px`:this.list.style.height=`${this.fixHeight}px`;this.listBlock.querySelector("[data-btn]").classList.add("active");this.list.classList.add("active")}else{this.listBlock.querySelector("[data-btn]").classList.remove("active");this.list.classList.remove("active");this.list.style.height=`0`}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",function(){return Tabs});class Tabs{constructor(btnArrow,tabArrow){this.btnArrow=btnArrow;this.tabArrow=tabArrow;this.btnArrow.forEach((elem,index)=>{elem.addEventListener("click",e=>{e.preventDefault();this.switchTab(index)})})}switchTab(index){this.btnArrow.forEach(btn=>{btn.classList.remove("active")});this.btnArrow[index].classList.add("active");this.tabArrow.forEach(tab=>{tab.classList.remove("active")});this.tabArrow[index].classList.add("active")}}},function(module,exports,__webpack_require__){__webpack_require__(4);__webpack_require__(5);__webpack_require__(6);__webpack_require__(7);__webpack_require__(8);__webpack_require__(9);__webpack_require__(1);__webpack_require__(0);module.exports=__webpack_require__(2)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _components_popupFunc__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);if(document.querySelector("section.comments")){new _components_popupFunc__WEBPACK_IMPORTED_MODULE_0__["default"](document.querySelector("section.comments .make-reply"),document.querySelector(".blog-popup"))}},function(module,exports){},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _components_popupFunc__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);var _components_tabs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2);if(document.querySelector("aside.catalog-aside")){new _components_popupFunc__WEBPACK_IMPORTED_MODULE_0__["default"](document.querySelector(".sort-filter .filter-btn"),document.querySelector("aside.catalog-aside"))}if(document.querySelector("section.product-tabs")){new _components_tabs__WEBPACK_IMPORTED_MODULE_1__["default"]([...document.querySelectorAll("section.product-tabs .tab-link")],[...document.querySelectorAll("section.product-tabs .tab")])}},function(module,exports){if(document.querySelector("section.payment")){let swiper=new Swiper("section.payment .swiper-container",{slidesPerView:1,spaceBetween:20,autoHeight:true,navigation:{nextEl:"section.payment .buttons .next",prevEl:"section.payment .buttons .prev"},pagination:{formatFractionCurrent:function(number){if(number<10){number="0"+number}return number},formatFractionTotal:function(number){if(number<10){number="0"+number}return number},el:".swiper-pagination",type:"fraction"},breakpoints:{768:{slidesPerView:2}}})}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _components_popupFunc__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);var _components_hideList__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1);if(document.querySelector(".product-slider")){document.querySelectorAll(".product-slider").forEach(elem=>{let swiper=new Swiper(elem.querySelector(".swiper-container"),{slidesPerView:4,slidesPerGroup:4,spaceBetween:20,pagination:{el:elem.querySelector(".pagination"),clickable:true,renderBullet:function(index,className){return`<span class="dot ${className}"></span>`}},navigation:{nextEl:elem.querySelector(".arrow.next"),prevEl:elem.querySelector(".arrow.prev")},breakpoints:{1001:{slidesPerView:4,slidesPerGroup:4},768:{slidesPerView:3,slidesPerGroup:3,spaceBetween:20},0:{slidesPerView:2,slidesPerGroup:2,spaceBetween:5}}})})}if(document.querySelector(".header")){new _components_popupFunc__WEBPACK_IMPORTED_MODULE_0__["default"](document.querySelector("header .header .cart .button"),document.querySelector(".header .cart-header"),false);if(window.screen.width<768){new _components_popupFunc__WEBPACK_IMPORTED_MODULE_0__["default"](document.querySelector("header .header .mobile-buttons .menu"),[document.querySelector(".header .contacts"),document.querySelector(".header .refs")]);new _components_popupFunc__WEBPACK_IMPORTED_MODULE_0__["default"](document.querySelector("header .header .mobile-buttons .search"),document.querySelector("#search"))}}if(document.querySelector(".header li.has_child")){document.querySelectorAll(".header .refs>.container>li.has_child").forEach(menu=>{let menuContainer=document.querySelector(".header .refs>.container");let maxWidth=menuContainer.offsetLeft+menuContainer.offsetWidth;let subMenu=menu.querySelector(".sub_menu.level_2");let subMenuOffsetLeft=menuContainer.offsetLeft+menu.offsetLeft+subMenu.offsetWidth;if(subMenuOffsetLeft>maxWidth){subMenu.style.marginLeft=`-${subMenu.offsetWidth-menu.offsetWidth}px`}if(menu.querySelector(".sub_menu.level_3")){menu.querySelectorAll(".sub_menu.level_3").forEach(menuLevel3=>{if(menuContainer.offsetLeft+menu.offsetLeft+subMenu.offsetWidth+menuLevel3.offsetWidth>maxWidth){menuLevel3.style.left="auto";menuLevel3.style.right="100%"}})}})}if(document.querySelector(".header li.has_child")&&window.screen.width<768){document.querySelectorAll(".header li.has_child").forEach(elem=>{let ref=elem.querySelector("a");let flag=false;function closeMenu(event){if(!event.target.closest(".dropdown-menu")){ref.classList.remove("active");if(elem.querySelector(".dropdown-menu")){elem.querySelector(".dropdown-menu").style.display="none"}else{elem.querySelector(".sub_menu").style.display="none"}flag=false;window.removeEventListener("click",closeMenu)}}ref.addEventListener("click",function(e){let menuList;if(elem.querySelector(".dropdown-menu")){menuList=elem.querySelector(".dropdown-menu")}else{menuList=elem.querySelector(".sub_menu")}if(flag&&menuList.style.display==="flex"){return true}else{flag=true;e.preventDefault();e.stopPropagation();document.querySelectorAll(".header li.has_child .sub_menu").forEach(menu=>{if(menu.classList.contains("level_3")){menu.style.display="none";menu.parentNode.querySelector("a").classList.remove("active")}});ref.classList.add("active");menuList.style.display="flex";window.addEventListener("click",closeMenu)}})})}if(document.querySelector("[data-hide]")){document.querySelectorAll("[data-hide]").forEach(elem=>{if(elem.classList.contains("custom-filter")){new _components_hideList__WEBPACK_IMPORTED_MODULE_1__["default"](elem,360)}else{new _components_hideList__WEBPACK_IMPORTED_MODULE_1__["default"](elem)}})}},function(module,exports){if(document.querySelector("section.banner")){let swiper=new Swiper("section.banner .swiper-container",{centeredSlides:true,loop:true,autoplay:{delay:5e3,disableOnInteraction:false}})}if(document.querySelector("section.brands")){document.querySelectorAll("section.brands").forEach(elem=>{let swiper=new Swiper(elem.querySelector(".swiper-container"),{slidesPerView:5,slidesPerGroup:5,spaceBetween:20,pagination:{el:elem.querySelector(".pagination"),clickable:true,renderBullet:function(index,className){return`<span class="dot ${className}"></span>`}},breakpoints:{768:{slidesPerView:5,slidesPerGroup:5},577:{slidesPerView:4,slidesPerGroup:4},421:{slidesPerView:3,slidesPerGroup:3},0:{slidesPerView:2,slidesPerGroup:2}}})})}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibW9kdWxlcyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJnZXREZWZhdWx0IiwiZ2V0TW9kdWxlRXhwb3J0cyIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIl9fd2VicGFja19leHBvcnRzX18iLCJwb3B1cEZ1bmMiLCJbb2JqZWN0IE9iamVjdF0iLCJidXR0b24iLCJwb3B1cCIsIndyYXBwZXIiLCJ0aGlzIiwib3BlblBvcHVwRnVuYyIsIm9wZW5Qb3B1cCIsImNsb3NlUG9wdXBGdW5jIiwiY2xvc2VQb3B1cCIsIkFycmF5IiwiaXNBcnJheSIsImZvckVhY2giLCJlbGVtIiwiYWRkRXZlbnRMaXN0ZW5lciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJldmVudCIsInRhcmdldCIsImRhdGFzZXQiLCJzdG9wRXZlbnQiLCJ1bmRlZmluZWQiLCJwcmV2ZW50RGVmYXVsdCIsImNsYXNzTGlzdCIsImFkZCIsInBhcmVudE5vZGUiLCJjb250YWlucyIsIndpbmRvdyIsInNjcmVlbiIsIndpZHRoIiwiZG9jdW1lbnQiLCJib2R5IiwicXVlcnlTZWxlY3RvciIsInN0b3BQcm9wYWdhdGlvbiIsInJlbW92ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJoaWRlTGlzdCIsImxpc3RCbG9jayIsImZpeEhlaWdodCIsImxpc3QiLCJlIiwic2hvd0Jsb2NrIiwic3R5bGUiLCJoZWlnaHQiLCJzY3JvbGxIZWlnaHQiLCJibG9ja0hlaWdodCIsInBhcnNlSW50IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImdldFByb3BlcnR5VmFsdWUiLCJUYWJzIiwiYnRuQXJyb3ciLCJ0YWJBcnJvdyIsImluZGV4Iiwic3dpdGNoVGFiIiwiYnRuIiwidGFiIiwiX2NvbXBvbmVudHNfcG9wdXBGdW5jX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18iLCJfY29tcG9uZW50c190YWJzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18iLCJzd2lwZXIiLCJTd2lwZXIiLCJzbGlkZXNQZXJWaWV3Iiwic3BhY2VCZXR3ZWVuIiwiYXV0b0hlaWdodCIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJwcmV2RWwiLCJwYWdpbmF0aW9uIiwiZm9ybWF0RnJhY3Rpb25DdXJyZW50IiwibnVtYmVyIiwiZm9ybWF0RnJhY3Rpb25Ub3RhbCIsImVsIiwidHlwZSIsImJyZWFrcG9pbnRzIiwiNzY4IiwiX2NvbXBvbmVudHNfaGlkZUxpc3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyIsInNsaWRlc1Blckdyb3VwIiwiY2xpY2thYmxlIiwicmVuZGVyQnVsbGV0IiwiY2xhc3NOYW1lIiwiMTAwMSIsIjAiLCJtZW51IiwibWVudUNvbnRhaW5lciIsIm1heFdpZHRoIiwib2Zmc2V0TGVmdCIsIm9mZnNldFdpZHRoIiwic3ViTWVudSIsInN1Yk1lbnVPZmZzZXRMZWZ0IiwibWFyZ2luTGVmdCIsIm1lbnVMZXZlbDMiLCJsZWZ0IiwicmlnaHQiLCJyZWYiLCJmbGFnIiwiY2xvc2VNZW51IiwiY2xvc2VzdCIsImRpc3BsYXkiLCJtZW51TGlzdCIsImNlbnRlcmVkU2xpZGVzIiwibG9vcCIsImF1dG9wbGF5IiwiZGVsYXkiLCJkaXNhYmxlT25JbnRlcmFjdGlvbiIsIjU3NyIsIjQyMSJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsU0FFVCxJQUFJQyxpQkFBbUIsR0FHdkIsU0FBU0Msb0JBQW9CQyxVQUc1QixHQUFHRixp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QyxDQUN4RHVDLGVBQWdCLEtBQ2hCQyxLQUFNLEtBQ05DLFNBQVUsQ0FDTkMsTUFBTyxJQUNQQyxxQkFBc0IsU0FJbEMsR0FBSXhFLFNBQVNFLGNBQWMsa0JBQWtCLENBQ3pDRixTQUFTZCxpQkFBaUIsa0JBQWtCSCxRQUFTQyxPQUNqRCxJQUFJNEMsT0FBUyxJQUFJQyxPQUFPN0MsS0FBS2tCLGNBQWMscUJBQXNCLENBQzdENEIsY0FBZSxFQUNmZSxlQUFnQixFQUNoQmQsYUFBYyxHQUNkSyxXQUFZLENBQ1JJLEdBQUl4RCxLQUFLa0IsY0FBYyxlQUN2QjRDLFVBQVcsS0FDWEMsYUFBYyxTQUFVekIsTUFBTzBCLFdBQzNCLDBCQUEyQkEsdUJBR25DTixZQUFhLENBQ1RDLElBQUssQ0FDRGIsY0FBZSxFQUNmZSxlQUFnQixHQUVwQjRCLElBQUssQ0FDRDNDLGNBQWUsRUFDZmUsZUFBZ0IsR0FFcEI2QixJQUFLLENBQ0Q1QyxjQUFlLEVBQ2ZlLGVBQWdCLEdBRXBCSyxFQUFHLENBQ0NwQixjQUFlLEVBQ2ZlLGVBQWdCIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRpOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGw6IGZhbHNlLFxuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge31cbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbi8qKioqKiovIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4vKioqKioqLyBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbi8qKioqKiovIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbi8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4vKioqKioqLyBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuLyoqKioqKi8gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbi8qKioqKiovIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4vKioqKioqLyBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbi8qKioqKiovIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbi8qKioqKiovIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuLyoqKioqKi8gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4vKioqKioqLyBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbi8qKioqKiovIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuLyoqKioqKi8gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbi8qKioqKiovIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4vKioqKioqLyBcdFx0cmV0dXJuIG5zO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4vKioqKioqLyBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbi8qKioqKiovIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4vKioqKioqLyBcdFx0cmV0dXJuIGdldHRlcjtcbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAzKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZGVmYXVsdFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIHBvcHVwRnVuYzsgfSk7XG5jbGFzcyBwb3B1cEZ1bmMge1xyXG4gICAgY29uc3RydWN0b3IoYnV0dG9uLHBvcHVwLHdyYXBwZXIgPSB0cnVlKSB7XHJcbiAgICAgICAgdGhpcy5idXR0b24gPSBidXR0b247XHJcbiAgICAgICAgdGhpcy5wb3B1cCA9IHBvcHVwO1xyXG4gICAgICAgIHRoaXMud3JhcHBlciA9IHdyYXBwZXI7XHJcbiAgICAgICAgdGhpcy5vcGVuUG9wdXBGdW5jID0gdGhpcy5vcGVuUG9wdXAuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmNsb3NlUG9wdXBGdW5jID0gdGhpcy5jbG9zZVBvcHVwLmJpbmQodGhpcyk7XHJcbiAgICAgICAgaWYgKCBBcnJheS5pc0FycmF5KHRoaXMuYnV0dG9uKSl7XHJcbiAgICAgICAgICAgIHRoaXMuYnV0dG9uLmZvckVhY2goIGVsZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgZWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub3BlblBvcHVwRnVuYyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9wZW5Qb3B1cEZ1bmMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnBvcHVwKSl7XHJcbiAgICAgICAgICAgIHRoaXMucG9wdXAuZm9yRWFjaCggZWxlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBlbGVtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jbG9zZScpLmZvckVhY2goZWxlbSA9PiBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZVBvcHVwRnVuYykpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jbG9zZScpLmZvckVhY2goZWxlbSA9PiBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZVBvcHVwRnVuYykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9wZW5Qb3B1cChldmVudCl7XHJcbiAgICAgICAgaWYoZXZlbnQudGFyZ2V0LmRhdGFzZXQuc3RvcEV2ZW50ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5wb3B1cCkpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1cC5mb3JFYWNoKCBlbGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtLnBhcmVudE5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCd3cmFwcGVyJykgJiYgdGhpcy53cmFwcGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0ucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5zY3JlZW4ud2lkdGggPCA3NjgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC13cmFwcGVyJykgJiYgdGhpcy53cmFwcGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLXdyYXBwZXInKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucG9wdXAuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wb3B1cC5wYXJlbnROb2RlLmNsYXNzTGlzdC5jb250YWlucygnd3JhcHBlcicpICYmIHRoaXMud3JhcHBlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9wdXAucGFyZW50Tm9kZS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuc2NyZWVuLndpZHRoIDwgNzY4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC13cmFwcGVyJykgJiYgdGhpcy53cmFwcGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLXdyYXBwZXInKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5jbG9zZVBvcHVwRnVuYyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2xvc2VQb3B1cChldmVudCl7XHJcbiAgICAgICAgaWYgKCFldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjbG9zZScpKXtcclxuICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5wb3B1cCkpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1cC5mb3JFYWNoKCBlbGVtID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtLnBhcmVudE5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCd3cmFwcGVyJykgJiYgdGhpcy53cmFwcGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0ucGFyZW50Tm9kZS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5zY3JlZW4ud2lkdGggPCA3NjgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLXdyYXBwZXInKSAmJiB0aGlzLndyYXBwZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLXdyYXBwZXInKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBvcHVwLnBhcmVudE5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCd3cmFwcGVyJykgJiYgdGhpcy53cmFwcGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3B1cC5wYXJlbnROb2RlLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5zY3JlZW4ud2lkdGggPCA3NjgpIHtcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLXdyYXBwZXInKSAmJiB0aGlzLndyYXBwZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtd3JhcHBlcicpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLmNsb3NlUG9wdXBGdW5jKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqKi8gfSksXG4vKiAxICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImRlZmF1bHRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBoaWRlTGlzdDsgfSk7XG5jbGFzcyBoaWRlTGlzdHtcclxuICAgIGNvbnN0cnVjdG9yKGxpc3RCbG9jaywgZml4SGVpZ2h0ID0gbnVsbCkge1xyXG4gICAgICAgIHRoaXMuZml4SGVpZ2h0ID0gZml4SGVpZ2h0XHJcbiAgICAgICAgdGhpcy5saXN0QmxvY2sgPSBsaXN0QmxvY2s7XHJcbiAgICAgICAgdGhpcy5saXN0ID0gdGhpcy5saXN0QmxvY2sucXVlcnlTZWxlY3RvcignW2RhdGEtYmxvY2tdJyk7XHJcbiAgICAgICAgdGhpcy5saXN0QmxvY2sucXVlcnlTZWxlY3RvcignW2RhdGEtYnRuXScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpPT57dGhpcy5zaG93QmxvY2soZSl9KVxyXG4gICAgICAgIGlmICh0aGlzLmxpc3RCbG9jay5xdWVyeVNlbGVjdG9yKCdbZGF0YS1idG5dJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICB0aGlzLmZpeEhlaWdodCA9PT0gbnVsbCA/IHRoaXMubGlzdC5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLmxpc3Quc2Nyb2xsSGVpZ2h0fXB4YCA6IHRoaXMubGlzdC5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLmZpeEhlaWdodH1weGA7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5saXN0LnF1ZXJ5U2VsZWN0b3IoJy5jbG9zZScpKXtcclxuICAgICAgICAgICAgdGhpcy5saXN0LnF1ZXJ5U2VsZWN0b3IoJy5jbG9zZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpPT57dGhpcy5zaG93QmxvY2soZSl9KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNob3dCbG9jayhlKXtcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgbGV0IGJsb2NrSGVpZ2h0ID0gcGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5saXN0KS5nZXRQcm9wZXJ0eVZhbHVlKCdoZWlnaHQnKSk7XHJcbiAgICAgICAgaWYgKGJsb2NrSGVpZ2h0ID09PSAwKXtcclxuICAgICAgICAgICAgdGhpcy5maXhIZWlnaHQgPT09IG51bGwgPyB0aGlzLmxpc3Quc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5saXN0LnNjcm9sbEhlaWdodH1weGAgOiB0aGlzLmxpc3Quc3R5bGUuaGVpZ2h0ID0gYCR7dGhpcy5maXhIZWlnaHR9cHhgO1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RCbG9jay5xdWVyeVNlbGVjdG9yKCdbZGF0YS1idG5dJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdEJsb2NrLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWJ0bl0nKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgdGhpcy5saXN0LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXHJcbiAgICAgICAgICAgIHRoaXMubGlzdC5zdHlsZS5oZWlnaHQgPSBgMGBcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqKi8gfSksXG4vKiAyICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImRlZmF1bHRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBUYWJzOyB9KTtcbmNsYXNzIFRhYnN7XHJcbiAgICBjb25zdHJ1Y3RvcihidG5BcnJvdywgdGFiQXJyb3cpIHtcclxuICAgICAgICB0aGlzLmJ0bkFycm93ID0gYnRuQXJyb3c7XHJcbiAgICAgICAgdGhpcy50YWJBcnJvdyA9IHRhYkFycm93O1xyXG4gICAgICAgIHRoaXMuYnRuQXJyb3cuZm9yRWFjaCggKGVsZW0sIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zd2l0Y2hUYWIoaW5kZXgpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIHN3aXRjaFRhYihpbmRleCl7XHJcbiAgICAgICAgdGhpcy5idG5BcnJvdy5mb3JFYWNoKGJ0biA9PntcclxuICAgICAgICAgICAgYnRuLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5idG5BcnJvd1tpbmRleF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgdGhpcy50YWJBcnJvdy5mb3JFYWNoKHRhYiA9PntcclxuICAgICAgICAgICAgdGFiLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy50YWJBcnJvd1tpbmRleF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICB9XHJcbn1cblxuLyoqKi8gfSksXG4vKiAzICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cbl9fd2VicGFja19yZXF1aXJlX18oNCk7XG5fX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuX193ZWJwYWNrX3JlcXVpcmVfXyg2KTtcbl9fd2VicGFja19yZXF1aXJlX18oNyk7XG5fX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcbl9fd2VicGFja19yZXF1aXJlX18oMSk7XG5fX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xubW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG5cbi8qKiovIH0pLFxuLyogNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29tcG9uZW50c19wb3B1cEZ1bmNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cclxuXHJcbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzZWN0aW9uLmNvbW1lbnRzJykpe1xyXG4gICAgbmV3IF9jb21wb25lbnRzX3BvcHVwRnVuY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzZWN0aW9uLmNvbW1lbnRzIC5tYWtlLXJlcGx5JyksIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ibG9nLXBvcHVwJykpXHJcbn1cblxuLyoqKi8gfSksXG4vKiA1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblxuXG4vKioqLyB9KSxcbi8qIDYgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbXBvbmVudHNfcG9wdXBGdW5jX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX3RhYnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cclxuXHJcblxyXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYXNpZGUuY2F0YWxvZy1hc2lkZScpKXtcclxuICAgIG5ldyBfY29tcG9uZW50c19wb3B1cEZ1bmNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl0oZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNvcnQtZmlsdGVyIC5maWx0ZXItYnRuJyksIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2FzaWRlLmNhdGFsb2ctYXNpZGUnKSlcclxufVxyXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2VjdGlvbi5wcm9kdWN0LXRhYnMnKSl7XHJcbiAgICBuZXcgX2NvbXBvbmVudHNfdGFic19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZGVmYXVsdFwiXShbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc2VjdGlvbi5wcm9kdWN0LXRhYnMgLnRhYi1saW5rJyldLCBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc2VjdGlvbi5wcm9kdWN0LXRhYnMgLnRhYicpXSlcclxufVxuXG4vKioqLyB9KSxcbi8qIDcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3NlY3Rpb24ucGF5bWVudCcpKXtcclxuICAgIGxldCBzd2lwZXIgPSBuZXcgU3dpcGVyKCdzZWN0aW9uLnBheW1lbnQgLnN3aXBlci1jb250YWluZXInLCB7XHJcbiAgICAgICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgICAgICBzcGFjZUJldHdlZW46IDIwLFxyXG4gICAgICAgIGF1dG9IZWlnaHQ6IHRydWUsXHJcbiAgICAgICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgICAgICBuZXh0RWw6ICdzZWN0aW9uLnBheW1lbnQgLmJ1dHRvbnMgLm5leHQnLFxyXG4gICAgICAgICAgICBwcmV2RWw6ICdzZWN0aW9uLnBheW1lbnQgLmJ1dHRvbnMgLnByZXYnLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICAgICAgICBmb3JtYXRGcmFjdGlvbkN1cnJlbnQ6IGZ1bmN0aW9uKG51bWJlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKG51bWJlciA8IDEwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbnVtYmVyID0gJzAnICsgbnVtYmVyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bWJlcjtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZm9ybWF0RnJhY3Rpb25Ub3RhbDogZnVuY3Rpb24obnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVtYmVyIDwgMTApIHtcclxuICAgICAgICAgICAgICAgICAgICBudW1iZXIgPSAnMCcgKyBudW1iZXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVtYmVyO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlbDogJy5zd2lwZXItcGFnaW5hdGlvbicsXHJcbiAgICAgICAgICAgIHR5cGU6ICdmcmFjdGlvbicsXHJcbiAgICAgICAgfSxcclxuICAgICAgICBicmVha3BvaW50czoge1xyXG4gICAgICAgICAgICA3Njg6IHtcclxuICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XG5cbi8qKiovIH0pLFxuLyogOCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29tcG9uZW50c19wb3B1cEZ1bmNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbXBvbmVudHNfaGlkZUxpc3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cclxuXHJcblxyXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2R1Y3Qtc2xpZGVyJykpe1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnByb2R1Y3Qtc2xpZGVyJykuZm9yRWFjaCggZWxlbSA9PiB7XHJcbiAgICAgICAgbGV0IHN3aXBlciA9IG5ldyBTd2lwZXIoZWxlbS5xdWVyeVNlbGVjdG9yKCcuc3dpcGVyLWNvbnRhaW5lcicpLCB7XHJcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDQsXHJcbiAgICAgICAgICAgIHNsaWRlc1Blckdyb3VwOiA0LFxyXG4gICAgICAgICAgICBzcGFjZUJldHdlZW46IDIwLFxyXG4gICAgICAgICAgICBwYWdpbmF0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICBlbDogZWxlbS5xdWVyeVNlbGVjdG9yKCcucGFnaW5hdGlvbicpLFxyXG4gICAgICAgICAgICAgICAgY2xpY2thYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgcmVuZGVyQnVsbGV0OiBmdW5jdGlvbiAoaW5kZXgsIGNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBgPHNwYW4gY2xhc3M9XCJkb3QgJHtjbGFzc05hbWV9XCI+PC9zcGFuPmBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgbmV4dEVsOiBlbGVtLnF1ZXJ5U2VsZWN0b3IoJy5hcnJvdy5uZXh0JyksXHJcbiAgICAgICAgICAgICAgICBwcmV2RWw6IGVsZW0ucXVlcnlTZWxlY3RvcignLmFycm93LnByZXYnKVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBicmVha3BvaW50czoge1xyXG4gICAgICAgICAgICAgICAgMTAwMToge1xyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDQsXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyR3JvdXA6IDQsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgNzY4OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMyxcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJHcm91cDogMyxcclxuICAgICAgICAgICAgICAgICAgICBzcGFjZUJldHdlZW46IDIwLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIDA6IHtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLFxyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1Blckdyb3VwOiAyLFxyXG4gICAgICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogNSxcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pXHJcbn1cclxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXInKSl7XHJcbiAgICBuZXcgX2NvbXBvbmVudHNfcG9wdXBGdW5jX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkZWZhdWx0XCJdKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlciAuaGVhZGVyIC5jYXJ0IC5idXR0b24nKSwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlciAuY2FydC1oZWFkZXInKSwgZmFsc2UpXHJcbiAgICBpZiAod2luZG93LnNjcmVlbi53aWR0aCA8IDc2OCkge1xyXG4gICAgICAgIG5ldyBfY29tcG9uZW50c19wb3B1cEZ1bmNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfX1tcImRlZmF1bHRcIl0oZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyIC5oZWFkZXIgLm1vYmlsZS1idXR0b25zIC5tZW51JyksIFtkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyIC5jb250YWN0cycpLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyIC5yZWZzJyldKTtcclxuICAgICAgICBuZXcgX2NvbXBvbmVudHNfcG9wdXBGdW5jX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkZWZhdWx0XCJdKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlciAuaGVhZGVyIC5tb2JpbGUtYnV0dG9ucyAuc2VhcmNoJyksIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzZWFyY2gnKSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyIGxpLmhhc19jaGlsZCcpKXtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5oZWFkZXIgLnJlZnM+LmNvbnRhaW5lcj5saS5oYXNfY2hpbGQnKS5mb3JFYWNoKCBtZW51ID0+IHtcclxuICAgICAgICBsZXQgbWVudUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXIgLnJlZnM+LmNvbnRhaW5lcicpO1xyXG4gICAgICAgIGxldCBtYXhXaWR0aCA9IG1lbnVDb250YWluZXIub2Zmc2V0TGVmdCArIG1lbnVDb250YWluZXIub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgbGV0IHN1Yk1lbnUgPSBtZW51LnF1ZXJ5U2VsZWN0b3IoJy5zdWJfbWVudS5sZXZlbF8yJyk7XHJcbiAgICAgICAgbGV0IHN1Yk1lbnVPZmZzZXRMZWZ0ID0gbWVudUNvbnRhaW5lci5vZmZzZXRMZWZ0ICsgbWVudS5vZmZzZXRMZWZ0ICsgc3ViTWVudS5vZmZzZXRXaWR0aDtcclxuICAgICAgICBpZiAoc3ViTWVudU9mZnNldExlZnQgPiBtYXhXaWR0aCl7XHJcbiAgICAgICAgICAgIHN1Yk1lbnUuc3R5bGUubWFyZ2luTGVmdCA9IGAtJHtzdWJNZW51Lm9mZnNldFdpZHRoIC0gbWVudS5vZmZzZXRXaWR0aH1weGBcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG1lbnUucXVlcnlTZWxlY3RvcignLnN1Yl9tZW51LmxldmVsXzMnKSl7XHJcbiAgICAgICAgICAgIG1lbnUucXVlcnlTZWxlY3RvckFsbCgnLnN1Yl9tZW51LmxldmVsXzMnKS5mb3JFYWNoKCBtZW51TGV2ZWwzID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChtZW51Q29udGFpbmVyLm9mZnNldExlZnQgKyBtZW51Lm9mZnNldExlZnQgKyBzdWJNZW51Lm9mZnNldFdpZHRoICsgbWVudUxldmVsMy5vZmZzZXRXaWR0aCA+IG1heFdpZHRoKXtcclxuICAgICAgICAgICAgICAgICAgICBtZW51TGV2ZWwzLnN0eWxlLmxlZnQgPSAnYXV0byc7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVudUxldmVsMy5zdHlsZS5yaWdodCA9ICcxMDAlJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59XHJcbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyIGxpLmhhc19jaGlsZCcpICYmIHdpbmRvdy5zY3JlZW4ud2lkdGggPCA3Njgpe1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhlYWRlciBsaS5oYXNfY2hpbGQnKS5mb3JFYWNoKCBlbGVtID0+IHtcclxuICAgICAgICBsZXQgcmVmID0gZWxlbS5xdWVyeVNlbGVjdG9yKFwiYVwiKTtcclxuICAgICAgICBsZXQgZmxhZyA9IGZhbHNlO1xyXG4gICAgICAgIGZ1bmN0aW9uIGNsb3NlTWVudShldmVudCl7XHJcbiAgICAgICAgICAgIGlmICghZXZlbnQudGFyZ2V0LmNsb3Nlc3QoJy5kcm9wZG93bi1tZW51Jykpe1xyXG4gICAgICAgICAgICAgICAgcmVmLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXHJcbiAgICAgICAgICAgICAgICBpZiAoZWxlbS5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tbWVudScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tbWVudScpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5xdWVyeVNlbGVjdG9yKCcuc3ViX21lbnUnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZU1lbnUpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmVmLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgbGV0IG1lbnVMaXN0O1xyXG4gICAgICAgICAgICBpZiAoZWxlbS5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tbWVudScpKSB7XHJcbiAgICAgICAgICAgICAgICBtZW51TGlzdCA9IGVsZW0ucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duLW1lbnUnKVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbWVudUxpc3QgPSBlbGVtLnF1ZXJ5U2VsZWN0b3IoJy5zdWJfbWVudScpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGZsYWcgJiYgbWVudUxpc3Quc3R5bGUuZGlzcGxheSA9PT0gJ2ZsZXgnKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBmbGFnID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaGVhZGVyIGxpLmhhc19jaGlsZCAuc3ViX21lbnUnKS5mb3JFYWNoKCBtZW51ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWVudS5jbGFzc0xpc3QuY29udGFpbnMoJ2xldmVsXzMnKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVudS5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJ2EnKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmVmLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgbWVudUxpc3Quc3R5bGUuZGlzcGxheSA9ICdmbGV4JztcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlTWVudSlcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9KVxyXG59XHJcblxyXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2RhdGEtaGlkZV0nKSl7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1oaWRlXScpLmZvckVhY2goZWxlbSA9PiB7XHJcbiAgICAgICAgaWYgKGVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdjdXN0b20tZmlsdGVyJykpIHtcclxuICAgICAgICAgICAgbmV3IF9jb21wb25lbnRzX2hpZGVMaXN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkZWZhdWx0XCJdKGVsZW0sIDM2MClcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBuZXcgX2NvbXBvbmVudHNfaGlkZUxpc3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImRlZmF1bHRcIl0oZWxlbSlcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59XG5cbi8qKiovIH0pLFxuLyogOSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2VjdGlvbi5iYW5uZXInKSl7XHJcbiAgICBsZXQgc3dpcGVyID0gbmV3IFN3aXBlcignc2VjdGlvbi5iYW5uZXIgLnN3aXBlci1jb250YWluZXInLCB7XHJcbiAgICAgICAgY2VudGVyZWRTbGlkZXM6IHRydWUsXHJcbiAgICAgICAgbG9vcDogdHJ1ZSxcclxuICAgICAgICBhdXRvcGxheToge1xyXG4gICAgICAgICAgICBkZWxheTogNTAwMCxcclxuICAgICAgICAgICAgZGlzYWJsZU9uSW50ZXJhY3Rpb246IGZhbHNlLFxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzZWN0aW9uLmJyYW5kcycpKXtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3NlY3Rpb24uYnJhbmRzJykuZm9yRWFjaCggZWxlbSA9PiB7XHJcbiAgICAgICAgbGV0IHN3aXBlciA9IG5ldyBTd2lwZXIoZWxlbS5xdWVyeVNlbGVjdG9yKCcuc3dpcGVyLWNvbnRhaW5lcicpLCB7XHJcbiAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDUsXHJcbiAgICAgICAgICAgIHNsaWRlc1Blckdyb3VwOiA1LFxyXG4gICAgICAgICAgICBzcGFjZUJldHdlZW46IDIwLFxyXG4gICAgICAgICAgICBwYWdpbmF0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICBlbDogZWxlbS5xdWVyeVNlbGVjdG9yKCcucGFnaW5hdGlvbicpLFxyXG4gICAgICAgICAgICAgICAgY2xpY2thYmxlOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgcmVuZGVyQnVsbGV0OiBmdW5jdGlvbiAoaW5kZXgsIGNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBgPHNwYW4gY2xhc3M9XCJkb3QgJHtjbGFzc05hbWV9XCI+PC9zcGFuPmBcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYnJlYWtwb2ludHM6IHtcclxuICAgICAgICAgICAgICAgIDc2ODoge1xyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDUsXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyR3JvdXA6IDUsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgNTc3OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogNCxcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJHcm91cDogNCxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICA0MjE6IHtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAzLFxyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1Blckdyb3VwOiAzLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIDA6IHtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLFxyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1Blckdyb3VwOiAyLFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KVxyXG59XG5cbi8qKiovIH0pXG4vKioqKioqLyBdKTsiXSwiZmlsZSI6Im1haW4tbWluLmpzIn0=
