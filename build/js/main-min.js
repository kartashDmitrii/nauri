(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=3)})([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",function(){return popupFunc});class popupFunc{constructor(button,popup,wrapper=true){this.button=button;this.popup=popup;this.wrapper=wrapper;this.openPopupFunc=this.openPopup.bind(this);this.closePopupFunc=this.closePopup.bind(this);if(Array.isArray(this.button)){this.button.forEach(elem=>{elem.addEventListener("click",this.openPopupFunc)})}else{this.button.addEventListener("click",this.openPopupFunc)}if(Array.isArray(this.popup)){this.popup.forEach(elem=>{elem.querySelectorAll(".close").forEach(elem=>elem.addEventListener("click",this.closePopupFunc))})}else{this.popup.querySelectorAll(".close").forEach(elem=>elem.addEventListener("click",this.closePopupFunc))}if(document.querySelector(".popup-wrapper")&&this.wrapper){document.querySelector(".popup-wrapper").addEventListener("click",this.closePopupFunc)}}openPopup(event){if(event.target.dataset.stopEvent===undefined){event.preventDefault();if(Array.isArray(this.popup)){this.popup.forEach(elem=>{elem.classList.add("active");if(elem.parentNode.classList.contains("wrapper")&&this.wrapper){elem.parentNode.classList.add("active")}if(window.screen.width<768){document.body.classList.add("hidden")}});if(document.querySelector(".popup-wrapper")&&this.wrapper){document.querySelector(".popup-wrapper").classList.add("active")}}else{this.popup.classList.add("active");if(this.popup.parentNode.classList.contains("wrapper")&&this.wrapper){this.popup.parentNode.classList.add("active")}if(window.screen.width<768){document.body.classList.add("hidden")}if(document.querySelector(".popup-wrapper")&&this.wrapper){document.querySelector(".popup-wrapper").classList.add("active")}}window.addEventListener("mousedown",this.closePopupFunc)}}closePopup(event){if(!event.target.classList.contains("close")&&event.target.closest(`.${this.button.dataset.popup}`)!==null){event.stopPropagation()}else{if(Array.isArray(this.popup)){this.popup.forEach(elem=>{elem.classList.remove("active");if(elem.parentNode.classList.contains("wrapper")&&this.wrapper){elem.parentNode.classList.remove("active")}if(window.screen.width<768){document.body.classList.remove("hidden")}})}else{this.popup.classList.remove("active");if(this.popup.parentNode.classList.contains("wrapper")&&this.wrapper){this.popup.parentNode.classList.remove("active")}if(window.screen.width<768){document.body.classList.remove("hidden")}}}if(document.querySelector(".popup-wrapper")&&this.wrapper){document.querySelector(".popup-wrapper").classList.remove("active")}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",function(){return hideList});class hideList{constructor(listBlock,fixHeight=null){this.fixHeight=fixHeight;this.listBlock=listBlock;this.list=this.listBlock.querySelector("[data-block]");this.listBlock.querySelector("[data-btn]").addEventListener("click",()=>{this.showBlock()});if(this.listBlock.querySelector("[data-btn]").classList.contains("active")){this.fixHeight===null?this.list.style.height=`${this.list.scrollHeight}px`:this.list.style.height=`${this.fixHeight}px`;this.list.classList.add("active")}}showBlock(){let blockHeight=parseInt(window.getComputedStyle(this.list).getPropertyValue("height"));if(blockHeight===0){this.fixHeight===null?this.list.style.height=`${this.list.scrollHeight}px`:this.list.style.height=`${this.fixHeight}px`;this.listBlock.querySelector("[data-btn]").classList.add("active");this.list.classList.add("active")}else{this.listBlock.querySelector("[data-btn]").classList.remove("active");this.list.classList.remove("active");this.list.style.height=`0`}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",function(){return Tabs});class Tabs{constructor(btnArrow,tabArrow){this.btnArrow=btnArrow;this.tabArrow=tabArrow;this.btnArrow.forEach((elem,index)=>{elem.addEventListener("click",e=>{e.preventDefault();this.switchTab(index)})})}switchTab(index){this.btnArrow.forEach(btn=>{btn.classList.remove("active")});this.btnArrow[index].classList.add("active");this.tabArrow.forEach(tab=>{tab.classList.remove("active")});this.tabArrow[index].classList.add("active")}}},function(module,exports,__webpack_require__){__webpack_require__(4);__webpack_require__(5);__webpack_require__(6);__webpack_require__(7);__webpack_require__(8);__webpack_require__(1);__webpack_require__(0);module.exports=__webpack_require__(2)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _components_popupFunc__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);if(document.querySelector("section.comments")){new _components_popupFunc__WEBPACK_IMPORTED_MODULE_0__["default"](document.querySelector("section.comments .make-reply"),document.querySelector(".blog-popup"))}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _components_popupFunc__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);var _components_tabs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(2);if(document.querySelector("aside.catalog-aside")){new _components_popupFunc__WEBPACK_IMPORTED_MODULE_0__["default"](document.querySelector(".sort-filter .filter-btn"),document.querySelector("aside.catalog-aside"))}if(document.querySelector("section.product-tabs")){new _components_tabs__WEBPACK_IMPORTED_MODULE_1__["default"]([...document.querySelectorAll("section.product-tabs .tab-link")],[...document.querySelectorAll("section.product-tabs .tab")])}},function(module,exports){if(document.querySelector("section.payment")){let swiper=new Swiper("section.payment .swiper-container",{slidesPerView:1,spaceBetween:20,autoHeight:true,navigation:{nextEl:"section.payment .buttons .next",prevEl:"section.payment .buttons .prev"},pagination:{formatFractionCurrent:function(number){if(number<10){number="0"+number}return number},formatFractionTotal:function(number){if(number<10){number="0"+number}return number},el:".swiper-pagination",type:"fraction"},breakpoints:{768:{slidesPerView:2}}})}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _components_popupFunc__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);var _components_hideList__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1);if(document.querySelector(".product-slider")){document.querySelectorAll(".product-slider").forEach(elem=>{let swiper=new Swiper(elem.querySelector(".swiper-container"),{slidesPerView:4,slidesPerGroup:4,spaceBetween:20,pagination:{el:elem.querySelector(".pagination"),clickable:true,renderBullet:function(index,className){return`<span class="dot ${className}"></span>`}},navigation:{nextEl:elem.querySelector(".arrow.next"),prevEl:elem.querySelector(".arrow.prev")},breakpoints:{1001:{slidesPerView:4,slidesPerGroup:4},768:{slidesPerView:3,slidesPerGroup:3,spaceBetween:20},0:{slidesPerView:2,slidesPerGroup:2,spaceBetween:5}}})})}if(document.querySelector(".header")){new _components_popupFunc__WEBPACK_IMPORTED_MODULE_0__["default"](document.querySelector("header .header .mobile-buttons .menu"),[document.querySelector(".header .contacts"),document.querySelector(".header .refs")]);new _components_popupFunc__WEBPACK_IMPORTED_MODULE_0__["default"](document.querySelector("header .header .mobile-buttons .search"),document.querySelector("#search"));new _components_popupFunc__WEBPACK_IMPORTED_MODULE_0__["default"](document.querySelector("header .header .cart .button"),document.querySelector(".header .cart-header"),false)}if(document.querySelector(".header li.has_child")){document.querySelectorAll(".header .refs>.container>li.has_child").forEach(menu=>{let menuContainer=document.querySelector(".header .refs>.container");let maxWidth=menuContainer.offsetLeft+menuContainer.offsetWidth;let subMenu=menu.querySelector(".sub_menu.level_2");let subMenuOffsetLeft=menuContainer.offsetLeft+menu.offsetLeft+subMenu.offsetWidth;if(subMenuOffsetLeft>maxWidth){subMenu.style.marginLeft=`-${subMenu.offsetWidth-menu.offsetWidth}px`}if(menu.querySelector(".sub_menu.level_3")){menu.querySelectorAll(".sub_menu.level_3").forEach(menuLevel3=>{if(menuContainer.offsetLeft+menu.offsetLeft+subMenu.offsetWidth+menuLevel3.offsetWidth>maxWidth){menuLevel3.style.left="auto";menuLevel3.style.right="100%"}})}})}if(document.querySelector(".header li.has_child")&&window.screen.width<768){document.querySelectorAll(".header li.has_child").forEach(elem=>{let ref=elem.querySelector("a");let flag=false;function closeMenu(event){if(!event.target.closest(".dropdown-menu")){ref.classList.remove("active");if(elem.querySelector(".dropdown-menu")){elem.querySelector(".dropdown-menu").style.display="none"}else{elem.querySelector(".sub_menu").style.display="none"}flag=false;window.removeEventListener("click",closeMenu)}}ref.addEventListener("click",function(e){let menuList;if(elem.querySelector(".dropdown-menu")){menuList=elem.querySelector(".dropdown-menu")}else{menuList=elem.querySelector(".sub_menu")}if(flag&&menuList.style.display==="flex"){return true}else{flag=true;e.preventDefault();e.stopPropagation();document.querySelectorAll(".header li.has_child .sub_menu").forEach(menu=>{if(menu.classList.contains("level_3")){menu.style.display="none";menu.parentNode.querySelector("a").classList.remove("active")}});ref.classList.add("active");menuList.style.display="flex";window.addEventListener("click",closeMenu)}})})}if(document.querySelector("[data-hide]")){document.querySelectorAll("[data-hide]").forEach(elem=>{if(elem.classList.contains("custom-filter")){new _components_hideList__WEBPACK_IMPORTED_MODULE_1__["default"](elem,360)}else{new _components_hideList__WEBPACK_IMPORTED_MODULE_1__["default"](elem)}})}},function(module,exports){if(document.querySelector("section.banner")){let swiper=new Swiper("section.banner .swiper-container",{centeredSlides:true,loop:true,autoplay:{delay:5e3,disableOnInteraction:false}})}if(document.querySelector("section.brands")){document.querySelectorAll("section.brands").forEach(elem=>{let swiper=new Swiper(elem.querySelector(".swiper-container"),{slidesPerView:5,slidesPerGroup:5,spaceBetween:20,pagination:{el:elem.querySelector(".pagination"),clickable:true,renderBullet:function(index,className){return`<span class="dot ${className}"></span>`}},breakpoints:{768:{slidesPerView:5,slidesPerGroup:5},577:{slidesPerView:4,slidesPerGroup:4},421:{slidesPerView:3,slidesPerGroup:3},0:{slidesPerView:2,slidesPerGroup:2}}})})}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibW9kdWxlcyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJnZXREZWZhdWx0IiwiZ2V0TW9kdWxlRXhwb3J0cyIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIl9fd2VicGFja19leHBvcnRzX18iLCJwb3B1cEZ1bmMiLCJbb2JqZWN0IE9iamVjdF0iLCJidXR0b24iLCJwb3B1cCIsIndyYXBwZXIiLCJ0aGlzIiwib3BlblBvcHVwRnVuYyIsIm9wZW5Qb3B1cCIsImNsb3NlUG9wdXBGdW5jIiwiY2xvc2VQb3B1cCIsIkFycmF5IiwiaXNBcnJheSIsImZvckVhY2giLCJlbGVtIiwiYWRkRXZlbnRMaXN0ZW5lciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJldmVudCIsInRhcmdldCIsImRhdGFzZXQiLCJzdG9wRXZlbnQiLCJ1bmRlZmluZWQiLCJwcmV2ZW50RGVmYXVsdCIsImNsYXNzTGlzdCIsImFkZCIsInBhcmVudE5vZGUiLCJjb250YWlucyIsIndpbmRvdyIsInNjcmVlbiIsIndpZHRoIiwiYm9keSIsImNsb3Nlc3QiLCJzdG9wUHJvcGFnYXRpb24iLCJyZW1vdmUiLCJoaWRlTGlzdCIsImxpc3RCbG9jayIsImZpeEhlaWdodCIsImxpc3QiLCJzaG93QmxvY2siLCJzdHlsZSIsImhlaWdodCIsInNjcm9sbEhlaWdodCIsImJsb2NrSGVpZ2h0IiwicGFyc2VJbnQiLCJnZXRDb21wdXRlZFN0eWxlIiwiZ2V0UHJvcGVydHlWYWx1ZSIsIlRhYnMiLCJidG5BcnJvdyIsInRhYkFycm93IiwiaW5kZXgiLCJlIiwic3dpdGNoVGFiIiwiYnRuIiwidGFiIiwiX2NvbXBvbmVudHNfcG9wdXBGdW5jX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18iLCJfY29tcG9uZW50c190YWJzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18iLCJzd2lwZXIiLCJTd2lwZXIiLCJzbGlkZXNQZXJWaWV3Iiwic3BhY2VCZXR3ZWVuIiwiYXV0b0hlaWdodCIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJwcmV2RWwiLCJwYWdpbmF0aW9uIiwiZm9ybWF0RnJhY3Rpb25DdXJyZW50IiwibnVtYmVyIiwiZm9ybWF0RnJhY3Rpb25Ub3RhbCIsImVsIiwidHlwZSIsImJyZWFrcG9pbnRzIiwiNzY4IiwiX2NvbXBvbmVudHNfaGlkZUxpc3RfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyIsInNsaWRlc1Blckdyb3VwIiwiY2xpY2thYmxlIiwicmVuZGVyQnVsbGV0IiwiY2xhc3NOYW1lIiwiMTAwMSIsIjAiLCJtZW51IiwibWVudUNvbnRhaW5lciIsIm1heFdpZHRoIiwib2Zmc2V0TGVmdCIsIm9mZnNldFdpZHRoIiwic3ViTWVudSIsInN1Yk1lbnVPZmZzZXRMZWZ0IiwibWFyZ2luTGVmdCIsIm1lbnVMZXZlbDMiLCJsZWZ0IiwicmlnaHQiLCJyZWYiLCJmbGFnIiwiY2xvc2VNZW51IiwiZGlzcGxheSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJtZW51TGlzdCIsImNlbnRlcmVkU2xpZGVzIiwibG9vcCIsImF1dG9wbGF5IiwiZGVsYXkiLCJkaXNhYmxlT25JbnRlcmFjdGlvbiIsIjU3NyIsIjQyMSJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsU0FFVCxJQUFJQyxpQkFBbUIsR0FHdkIsU0FBU0Msb0JBQW9CQyxVQUc1QixHQUFHRixp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ZSxFQUNmZSxlQUFnQixFQUNoQmQsYUFBYyxHQUNkSyxXQUFZLENBQ1JJLEdBQUl4RCxLQUFLSSxjQUFjLGVBQ3ZCMEQsVUFBVyxLQUNYQyxhQUFjLFNBQVUxQixNQUFPMkIsV0FDM0IsMEJBQTJCQSx1QkFHbkNOLFlBQWEsQ0FDVEMsSUFBSyxDQUNEYixjQUFlLEVBQ2ZlLGVBQWdCLEdBRXBCNEIsSUFBSyxDQUNEM0MsY0FBZSxFQUNmZSxlQUFnQixHQUVwQjZCLElBQUssQ0FDRDVDLGNBQWUsRUFDZmUsZUFBZ0IsR0FFcEJLLEVBQUcsQ0FDQ3BCLGNBQWUsRUFDZmUsZUFBZ0IiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGk6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bDogZmFsc2UsXG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuLyoqKioqKi8gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbi8qKioqKiovIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuLyoqKioqKi8gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3Rcbi8qKioqKiovIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4vKioqKioqLyBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuLyoqKioqKi8gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3Rcbi8qKioqKiovIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuLyoqKioqKi8gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuLyoqKioqKi8gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4vKioqKioqLyBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbi8qKioqKiovIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4vKioqKioqLyBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuLyoqKioqKi8gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbi8qKioqKiovIFx0XHRyZXR1cm4gbnM7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbi8qKioqKiovIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4vKioqKioqLyBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuLyoqKioqKi8gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbi8qKioqKiovIFx0XHRyZXR1cm4gZ2V0dGVyO1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDMpO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJkZWZhdWx0XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gcG9wdXBGdW5jOyB9KTtcbmNsYXNzIHBvcHVwRnVuYyB7XHJcbiAgICBjb25zdHJ1Y3RvcihidXR0b24scG9wdXAsd3JhcHBlciA9IHRydWUpIHtcclxuICAgICAgICB0aGlzLmJ1dHRvbiA9IGJ1dHRvbjtcclxuICAgICAgICB0aGlzLnBvcHVwID0gcG9wdXA7XHJcbiAgICAgICAgdGhpcy53cmFwcGVyID0gd3JhcHBlcjtcclxuICAgICAgICB0aGlzLm9wZW5Qb3B1cEZ1bmMgPSB0aGlzLm9wZW5Qb3B1cC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuY2xvc2VQb3B1cEZ1bmMgPSB0aGlzLmNsb3NlUG9wdXAuYmluZCh0aGlzKTtcclxuICAgICAgICBpZiAoIEFycmF5LmlzQXJyYXkodGhpcy5idXR0b24pKXtcclxuICAgICAgICAgICAgdGhpcy5idXR0b24uZm9yRWFjaCggZWxlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vcGVuUG9wdXBGdW5jKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub3BlblBvcHVwRnVuYyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMucG9wdXApKXtcclxuICAgICAgICAgICAgdGhpcy5wb3B1cC5mb3JFYWNoKCBlbGVtID0+IHtcclxuICAgICAgICAgICAgICAgIGVsZW0ucXVlcnlTZWxlY3RvckFsbCgnLmNsb3NlJykuZm9yRWFjaChlbGVtID0+IGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlUG9wdXBGdW5jKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucG9wdXAucXVlcnlTZWxlY3RvckFsbCgnLmNsb3NlJykuZm9yRWFjaChlbGVtID0+IGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlUG9wdXBGdW5jKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtd3JhcHBlcicpICYmIHRoaXMud3JhcHBlcikge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtd3JhcHBlcicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZVBvcHVwRnVuYyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb3BlblBvcHVwKGV2ZW50KXtcclxuICAgICAgICBpZihldmVudC50YXJnZXQuZGF0YXNldC5zdG9wRXZlbnQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnBvcHVwKSl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVwLmZvckVhY2goIGVsZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW0ucGFyZW50Tm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ3dyYXBwZXInKSAmJiB0aGlzLndyYXBwZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LnNjcmVlbi53aWR0aCA8IDc2OCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLXdyYXBwZXInKSAmJiB0aGlzLndyYXBwZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtd3JhcHBlcicpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wb3B1cC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBvcHVwLnBhcmVudE5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCd3cmFwcGVyJykgJiYgdGhpcy53cmFwcGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3B1cC5wYXJlbnROb2RlLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5zY3JlZW4ud2lkdGggPCA3NjgpIHtcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLXdyYXBwZXInKSAmJiB0aGlzLndyYXBwZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtd3JhcHBlcicpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLmNsb3NlUG9wdXBGdW5jKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBjbG9zZVBvcHVwKGV2ZW50KXtcclxuICAgICAgICBpZiAoIWV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Nsb3NlJykgJiYgZXZlbnQudGFyZ2V0LmNsb3Nlc3QoYC4ke3RoaXMuYnV0dG9uLmRhdGFzZXQucG9wdXB9YCkgIT09IG51bGwpe1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnBvcHVwKSl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVwLmZvckVhY2goIGVsZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW0ucGFyZW50Tm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ3dyYXBwZXInKSAmJiB0aGlzLndyYXBwZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5wYXJlbnROb2RlLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LnNjcmVlbi53aWR0aCA8IDc2OCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wb3B1cC5wYXJlbnROb2RlLmNsYXNzTGlzdC5jb250YWlucygnd3JhcHBlcicpICYmIHRoaXMud3JhcHBlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9wdXAucGFyZW50Tm9kZS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cuc2NyZWVuLndpZHRoIDwgNzY4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtd3JhcHBlcicpICYmIHRoaXMud3JhcHBlcikge1xyXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtd3JhcHBlcicpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKioqLyB9KSxcbi8qIDEgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGV4cG9ydCAoYmluZGluZykgKi8gX193ZWJwYWNrX3JlcXVpcmVfXy5kKF9fd2VicGFja19leHBvcnRzX18sIFwiZGVmYXVsdFwiLCBmdW5jdGlvbigpIHsgcmV0dXJuIGhpZGVMaXN0OyB9KTtcbmNsYXNzIGhpZGVMaXN0e1xyXG4gICAgY29uc3RydWN0b3IobGlzdEJsb2NrLCBmaXhIZWlnaHQgPSBudWxsKSB7XHJcbiAgICAgICAgdGhpcy5maXhIZWlnaHQgPSBmaXhIZWlnaHRcclxuICAgICAgICB0aGlzLmxpc3RCbG9jayA9IGxpc3RCbG9jaztcclxuICAgICAgICB0aGlzLmxpc3QgPSB0aGlzLmxpc3RCbG9jay5xdWVyeVNlbGVjdG9yKCdbZGF0YS1ibG9ja10nKTtcclxuICAgICAgICB0aGlzLmxpc3RCbG9jay5xdWVyeVNlbGVjdG9yKCdbZGF0YS1idG5dJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKT0+e3RoaXMuc2hvd0Jsb2NrKCl9KVxyXG4gICAgICAgIGlmICh0aGlzLmxpc3RCbG9jay5xdWVyeVNlbGVjdG9yKCdbZGF0YS1idG5dJykuY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xyXG4gICAgICAgICAgICB0aGlzLmZpeEhlaWdodCA9PT0gbnVsbCA/IHRoaXMubGlzdC5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLmxpc3Quc2Nyb2xsSGVpZ2h0fXB4YCA6IHRoaXMubGlzdC5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLmZpeEhlaWdodH1weGA7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNob3dCbG9jaygpe1xyXG4gICAgICAgIGxldCBibG9ja0hlaWdodCA9IHBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMubGlzdCkuZ2V0UHJvcGVydHlWYWx1ZSgnaGVpZ2h0JykpO1xyXG4gICAgICAgIGlmIChibG9ja0hlaWdodCA9PT0gMCl7XHJcbiAgICAgICAgICAgIHRoaXMuZml4SGVpZ2h0ID09PSBudWxsID8gdGhpcy5saXN0LnN0eWxlLmhlaWdodCA9IGAke3RoaXMubGlzdC5zY3JvbGxIZWlnaHR9cHhgIDogdGhpcy5saXN0LnN0eWxlLmhlaWdodCA9IGAke3RoaXMuZml4SGVpZ2h0fXB4YDtcclxuICAgICAgICAgICAgdGhpcy5saXN0QmxvY2sucXVlcnlTZWxlY3RvcignW2RhdGEtYnRuXScpLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB0aGlzLmxpc3QuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RCbG9jay5xdWVyeVNlbGVjdG9yKCdbZGF0YS1idG5dJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdC5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxyXG4gICAgICAgICAgICB0aGlzLmxpc3Quc3R5bGUuaGVpZ2h0ID0gYDBgXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKiovIH0pLFxuLyogMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJkZWZhdWx0XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gVGFiczsgfSk7XG5jbGFzcyBUYWJze1xyXG4gICAgY29uc3RydWN0b3IoYnRuQXJyb3csIHRhYkFycm93KSB7XHJcbiAgICAgICAgdGhpcy5idG5BcnJvdyA9IGJ0bkFycm93O1xyXG4gICAgICAgIHRoaXMudGFiQXJyb3cgPSB0YWJBcnJvdztcclxuICAgICAgICB0aGlzLmJ0bkFycm93LmZvckVhY2goIChlbGVtLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3dpdGNoVGFiKGluZGV4KVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICBzd2l0Y2hUYWIoaW5kZXgpe1xyXG4gICAgICAgIHRoaXMuYnRuQXJyb3cuZm9yRWFjaChidG4gPT57XHJcbiAgICAgICAgICAgIGJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuYnRuQXJyb3dbaW5kZXhdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgIHRoaXMudGFiQXJyb3cuZm9yRWFjaCh0YWIgPT57XHJcbiAgICAgICAgICAgIHRhYi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMudGFiQXJyb3dbaW5kZXhdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgfVxyXG59XG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcbl9fd2VicGFja19yZXF1aXJlX18oNik7XG5fX3dlYnBhY2tfcmVxdWlyZV9fKDcpO1xuX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcbl9fd2VicGFja19yZXF1aXJlX18oMSk7XG5fX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xubW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXG5cbi8qKiovIH0pLFxuLyogNCAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29tcG9uZW50c19wb3B1cEZ1bmNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cclxuXHJcbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzZWN0aW9uLmNvbW1lbnRzJykpe1xyXG4gICAgbmV3IF9jb21wb25lbnRzX3BvcHVwRnVuY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzZWN0aW9uLmNvbW1lbnRzIC5tYWtlLXJlcGx5JyksIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ibG9nLXBvcHVwJykpXHJcbn1cblxuLyoqKi8gfSksXG4vKiA1ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX3BvcHVwRnVuY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qIGhhcm1vbnkgaW1wb3J0ICovIHZhciBfY29tcG9uZW50c190YWJzX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHJcblxyXG5cclxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2FzaWRlLmNhdGFsb2ctYXNpZGUnKSl7XHJcbiAgICBuZXcgX2NvbXBvbmVudHNfcG9wdXBGdW5jX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkZWZhdWx0XCJdKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zb3J0LWZpbHRlciAuZmlsdGVyLWJ0bicpLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdhc2lkZS5jYXRhbG9nLWFzaWRlJykpXHJcbn1cclxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3NlY3Rpb24ucHJvZHVjdC10YWJzJykpe1xyXG4gICAgbmV3IF9jb21wb25lbnRzX3RhYnNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfX1tcImRlZmF1bHRcIl0oWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3NlY3Rpb24ucHJvZHVjdC10YWJzIC50YWItbGluaycpXSwgWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3NlY3Rpb24ucHJvZHVjdC10YWJzIC50YWInKV0pXHJcbn1cblxuLyoqKi8gfSksXG4vKiA2ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzZWN0aW9uLnBheW1lbnQnKSl7XHJcbiAgICBsZXQgc3dpcGVyID0gbmV3IFN3aXBlcignc2VjdGlvbi5wYXltZW50IC5zd2lwZXItY29udGFpbmVyJywge1xyXG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDEsXHJcbiAgICAgICAgc3BhY2VCZXR3ZWVuOiAyMCxcclxuICAgICAgICBhdXRvSGVpZ2h0OiB0cnVlLFxyXG4gICAgICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgICAgICAgbmV4dEVsOiAnc2VjdGlvbi5wYXltZW50IC5idXR0b25zIC5uZXh0JyxcclxuICAgICAgICAgICAgcHJldkVsOiAnc2VjdGlvbi5wYXltZW50IC5idXR0b25zIC5wcmV2JyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgICAgICAgZm9ybWF0RnJhY3Rpb25DdXJyZW50OiBmdW5jdGlvbihudW1iZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChudW1iZXIgPCAxMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG51bWJlciA9ICcwJyArIG51bWJlcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBudW1iZXI7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGZvcm1hdEZyYWN0aW9uVG90YWw6IGZ1bmN0aW9uKG51bWJlcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKG51bWJlciA8IDEwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbnVtYmVyID0gJzAnICsgbnVtYmVyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bWJlcjtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZWw6ICcuc3dpcGVyLXBhZ2luYXRpb24nLFxyXG4gICAgICAgICAgICB0eXBlOiAnZnJhY3Rpb24nLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYnJlYWtwb2ludHM6IHtcclxuICAgICAgICAgICAgNzY4OiB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAyXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxuXG4vKioqLyB9KSxcbi8qIDcgKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIF9fd2VicGFja19leHBvcnRzX18sIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXCJ1c2Ugc3RyaWN0XCI7XG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIoX193ZWJwYWNrX2V4cG9ydHNfXyk7XG4vKiBoYXJtb255IGltcG9ydCAqLyB2YXIgX2NvbXBvbmVudHNfcG9wdXBGdW5jX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX2hpZGVMaXN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHJcblxyXG5cclxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9kdWN0LXNsaWRlcicpKXtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wcm9kdWN0LXNsaWRlcicpLmZvckVhY2goIGVsZW0gPT4ge1xyXG4gICAgICAgIGxldCBzd2lwZXIgPSBuZXcgU3dpcGVyKGVsZW0ucXVlcnlTZWxlY3RvcignLnN3aXBlci1jb250YWluZXInKSwge1xyXG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiA0LFxyXG4gICAgICAgICAgICBzbGlkZXNQZXJHcm91cDogNCxcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyMCxcclxuICAgICAgICAgICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgZWw6IGVsZW0ucXVlcnlTZWxlY3RvcignLnBhZ2luYXRpb24nKSxcclxuICAgICAgICAgICAgICAgIGNsaWNrYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHJlbmRlckJ1bGxldDogZnVuY3Rpb24gKGluZGV4LCBjbGFzc05hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYDxzcGFuIGNsYXNzPVwiZG90ICR7Y2xhc3NOYW1lfVwiPjwvc3Bhbj5gXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgICAgICAgICAgIG5leHRFbDogZWxlbS5xdWVyeVNlbGVjdG9yKCcuYXJyb3cubmV4dCcpLFxyXG4gICAgICAgICAgICAgICAgcHJldkVsOiBlbGVtLnF1ZXJ5U2VsZWN0b3IoJy5hcnJvdy5wcmV2JylcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgYnJlYWtwb2ludHM6IHtcclxuICAgICAgICAgICAgICAgIDEwMDE6IHtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiA0LFxyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1Blckdyb3VwOiA0LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIDc2ODoge1xyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDMsXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyR3JvdXA6IDMsXHJcbiAgICAgICAgICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyMCxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAwOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMixcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJHcm91cDogMixcclxuICAgICAgICAgICAgICAgICAgICBzcGFjZUJldHdlZW46IDUsXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KVxyXG59XHJcbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyJykpe1xyXG4gICAgbmV3IF9jb21wb25lbnRzX3BvcHVwRnVuY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkZXIgLmhlYWRlciAubW9iaWxlLWJ1dHRvbnMgLm1lbnUnKSwgW2RvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXIgLmNvbnRhY3RzJyksIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXIgLnJlZnMnKV0pO1xyXG4gICAgbmV3IF9jb21wb25lbnRzX3BvcHVwRnVuY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkZXIgLmhlYWRlciAubW9iaWxlLWJ1dHRvbnMgLnNlYXJjaCcpLCBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjc2VhcmNoJykpO1xyXG4gICAgbmV3IF9jb21wb25lbnRzX3BvcHVwRnVuY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fW1wiZGVmYXVsdFwiXShkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdoZWFkZXIgLmhlYWRlciAuY2FydCAuYnV0dG9uJyksIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXIgLmNhcnQtaGVhZGVyJyksIGZhbHNlKVxyXG59XHJcblxyXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlciBsaS5oYXNfY2hpbGQnKSl7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaGVhZGVyIC5yZWZzPi5jb250YWluZXI+bGkuaGFzX2NoaWxkJykuZm9yRWFjaCggbWVudSA9PiB7XHJcbiAgICAgICAgbGV0IG1lbnVDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyIC5yZWZzPi5jb250YWluZXInKTtcclxuICAgICAgICBsZXQgbWF4V2lkdGggPSBtZW51Q29udGFpbmVyLm9mZnNldExlZnQgKyBtZW51Q29udGFpbmVyLm9mZnNldFdpZHRoO1xyXG4gICAgICAgIGxldCBzdWJNZW51ID0gbWVudS5xdWVyeVNlbGVjdG9yKCcuc3ViX21lbnUubGV2ZWxfMicpO1xyXG4gICAgICAgIGxldCBzdWJNZW51T2Zmc2V0TGVmdCA9IG1lbnVDb250YWluZXIub2Zmc2V0TGVmdCArIG1lbnUub2Zmc2V0TGVmdCArIHN1Yk1lbnUub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgaWYgKHN1Yk1lbnVPZmZzZXRMZWZ0ID4gbWF4V2lkdGgpe1xyXG4gICAgICAgICAgICBzdWJNZW51LnN0eWxlLm1hcmdpbkxlZnQgPSBgLSR7c3ViTWVudS5vZmZzZXRXaWR0aCAtIG1lbnUub2Zmc2V0V2lkdGh9cHhgXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChtZW51LnF1ZXJ5U2VsZWN0b3IoJy5zdWJfbWVudS5sZXZlbF8zJykpe1xyXG4gICAgICAgICAgICBtZW51LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zdWJfbWVudS5sZXZlbF8zJykuZm9yRWFjaCggbWVudUxldmVsMyA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAobWVudUNvbnRhaW5lci5vZmZzZXRMZWZ0ICsgbWVudS5vZmZzZXRMZWZ0ICsgc3ViTWVudS5vZmZzZXRXaWR0aCArIG1lbnVMZXZlbDMub2Zmc2V0V2lkdGggPiBtYXhXaWR0aCl7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVudUxldmVsMy5zdHlsZS5sZWZ0ID0gJ2F1dG8nO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lbnVMZXZlbDMuc3R5bGUucmlnaHQgPSAnMTAwJSc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmhlYWRlciBsaS5oYXNfY2hpbGQnKSAmJiB3aW5kb3cuc2NyZWVuLndpZHRoIDwgNzY4KXtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5oZWFkZXIgbGkuaGFzX2NoaWxkJykuZm9yRWFjaCggZWxlbSA9PiB7XHJcbiAgICAgICAgbGV0IHJlZiA9IGVsZW0ucXVlcnlTZWxlY3RvcihcImFcIik7XHJcbiAgICAgICAgbGV0IGZsYWcgPSBmYWxzZTtcclxuICAgICAgICBmdW5jdGlvbiBjbG9zZU1lbnUoZXZlbnQpe1xyXG4gICAgICAgICAgICBpZiAoIWV2ZW50LnRhcmdldC5jbG9zZXN0KCcuZHJvcGRvd24tbWVudScpKXtcclxuICAgICAgICAgICAgICAgIHJlZi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKVxyXG4gICAgICAgICAgICAgICAgaWYgKGVsZW0ucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duLW1lbnUnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW0ucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duLW1lbnUnKS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW0ucXVlcnlTZWxlY3RvcignLnN1Yl9tZW51Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZmxhZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VNZW51KVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJlZi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGxldCBtZW51TGlzdDtcclxuICAgICAgICAgICAgaWYgKGVsZW0ucXVlcnlTZWxlY3RvcignLmRyb3Bkb3duLW1lbnUnKSkge1xyXG4gICAgICAgICAgICAgICAgbWVudUxpc3QgPSBlbGVtLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bi1tZW51JylcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG1lbnVMaXN0ID0gZWxlbS5xdWVyeVNlbGVjdG9yKCcuc3ViX21lbnUnKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChmbGFnICYmIG1lbnVMaXN0LnN0eWxlLmRpc3BsYXkgPT09ICdmbGV4Jyl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZmxhZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhlYWRlciBsaS5oYXNfY2hpbGQgLnN1Yl9tZW51JykuZm9yRWFjaCggbWVudSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1lbnUuY2xhc3NMaXN0LmNvbnRhaW5zKCdsZXZlbF8zJykpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZW51LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lbnUucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCdhJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJlZi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIG1lbnVMaXN0LnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbG9zZU1lbnUpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfSlcclxufVxyXG5cclxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWhpZGVdJykpe1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtaGlkZV0nKS5mb3JFYWNoKGVsZW0gPT4ge1xyXG4gICAgICAgIGlmIChlbGVtLmNsYXNzTGlzdC5jb250YWlucygnY3VzdG9tLWZpbHRlcicpKSB7XHJcbiAgICAgICAgICAgIG5ldyBfY29tcG9uZW50c19oaWRlTGlzdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fW1wiZGVmYXVsdFwiXShlbGVtLCAzNjApXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbmV3IF9jb21wb25lbnRzX2hpZGVMaXN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkZWZhdWx0XCJdKGVsZW0pXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxuXG4vKioqLyB9KSxcbi8qIDggKi9cbi8qKiovIChmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3NlY3Rpb24uYmFubmVyJykpe1xyXG4gICAgbGV0IHN3aXBlciA9IG5ldyBTd2lwZXIoJ3NlY3Rpb24uYmFubmVyIC5zd2lwZXItY29udGFpbmVyJywge1xyXG4gICAgICAgIGNlbnRlcmVkU2xpZGVzOiB0cnVlLFxyXG4gICAgICAgIGxvb3A6IHRydWUsXHJcbiAgICAgICAgYXV0b3BsYXk6IHtcclxuICAgICAgICAgICAgZGVsYXk6IDUwMDAsXHJcbiAgICAgICAgICAgIGRpc2FibGVPbkludGVyYWN0aW9uOiBmYWxzZSxcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2VjdGlvbi5icmFuZHMnKSl7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzZWN0aW9uLmJyYW5kcycpLmZvckVhY2goIGVsZW0gPT4ge1xyXG4gICAgICAgIGxldCBzd2lwZXIgPSBuZXcgU3dpcGVyKGVsZW0ucXVlcnlTZWxlY3RvcignLnN3aXBlci1jb250YWluZXInKSwge1xyXG4gICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiA1LFxyXG4gICAgICAgICAgICBzbGlkZXNQZXJHcm91cDogNSxcclxuICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAyMCxcclxuICAgICAgICAgICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgZWw6IGVsZW0ucXVlcnlTZWxlY3RvcignLnBhZ2luYXRpb24nKSxcclxuICAgICAgICAgICAgICAgIGNsaWNrYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHJlbmRlckJ1bGxldDogZnVuY3Rpb24gKGluZGV4LCBjbGFzc05hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYDxzcGFuIGNsYXNzPVwiZG90ICR7Y2xhc3NOYW1lfVwiPjwvc3Bhbj5gXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgICAgICAgICAgICA3Njg6IHtcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJWaWV3OiA1LFxyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1Blckdyb3VwOiA1LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIDU3Nzoge1xyXG4gICAgICAgICAgICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDQsXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyR3JvdXA6IDQsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgNDIxOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMyxcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJHcm91cDogMyxcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAwOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMixcclxuICAgICAgICAgICAgICAgICAgICBzbGlkZXNQZXJHcm91cDogMixcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSlcclxufVxuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7Il0sImZpbGUiOiJtYWluLW1pbi5qcyJ9
